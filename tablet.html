<button class="request">Request</button>
<div class="reply"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>


  <script>
    var socket = io();
    var requester = false;


    $('.request').on('click', function(e) {
    	socket.emit('chat request');
    	requester = true;
    });

    socket.on('chat response', function(data) {
    	console.log("RECIEVED");
    	if(requester) {
    		$('.reply').text(JSON.stringify(data));
    		requester = false;
    	}
    	
    });

    // socket.on('chat message', function(msg){
    //   if (showing){
    //     $.magnificPopup.close();
    //     showing = false;
    //   } else {
    //     $.magnificPopup.open({
    //       items: {
    //         src: '#example_video_2', // can be a HTML string, jQuery object, or CSS selector
    //         type: 'inline'
    //       }
    //     });
    //     $("#example_video_2").trigger("play");
    //     showing = true;
    //   }
    // });
  </script>